<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>{% block title %}eko{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='homepage.css') }}" />

    <style>
        /* VARIÁVEIS DO EKO */
        :root {
            --eko-orange: #FF6E1A;
            --eko-bg: #1F1F23;
            --eko-nav: #0e0e10;
        }

        /* 1. CONFIGURAÇÃO PARA O RODAPÉ FICAR NO CHÃO (STICKY FOOTER) */
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Prompt', sans-serif;
        }

        /* O corpo vira uma coluna flexível */
        body {
            display: flex;
            flex-direction: column;
            background-color: transparent; /* IMPORTANTE: Transparente para ver o vídeo */
            color: #EDEDED;
        }

        /* 2. CONFIGURAÇÃO DO VÍDEO DE FUNDO */
        #video-background {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -10; /* Fica atrás de tudo */
            object-fit: cover; /* Cobre a tela toda sem deformar */
            background-color: var(--eko-bg); /* Cor de fundo caso o vídeo falhe */
        }

        /* O conteúdo principal estica para ocupar o espaço vazio */
        main {
            flex: 1;
            width: 100%;
            position: relative; /* Garante que fique sobre o vídeo */
        }

        /* NAVBAR E FOOTER */
        .bg-eko-dark { background-color: var(--eko-nav) !important; }
        
        /* --- AQUI ESTÁ A MUDANÇA DA LINHA LARANJA --- */
        .border-eko-header { 
            border-bottom: 2px solid var(--eko-orange) !important; 
        }
        /* -------------------------------------------- */

        .border-eko-footer { border-top: 1px solid #2A2A30; }
        .btn-eko { background-color: var(--eko-orange); color: white; border: none; font-weight: bold; }
        .btn-eko:hover { background-color: #e55a0b; color: white; }
        .nav-link { color: #EDEDED !important; }
        .nav-link:hover { color: var(--eko-orange) !important; }
    </style>
  </head>

  <body class="{% block body_class %}{% endblock %}"> 

    <video autoplay muted loop id="video-background">
        <source src="{{ url_for('static', filename='background.mp4') }}" type="video/mp4">
    </video>

    {% block navbar %}
    <header class="navbar navbar-expand-lg navbar-dark bg-eko-dark border-eko-header">
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('homepage') }}"> 
            <img src="{{ url_for('static', filename='eko_branco_transparente.png') }}" alt="eko" style="height: 30px" />
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarEko">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarEko">
          <ul class="navbar-nav ms-auto me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('homepage') }}">início</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('busca') }}">buscar</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('minhas_avaliacoes') }}">meu eko</a></li>
          </ul>
          <div class="d-flex gap-2 align-items-center">
            {% if session.get('usuario_email') %}
                <span class="text-white-50 me-2 small d-none d-lg-block">Olá, {{ session.get('usuario_nome', 'usuário') }}</span>
                <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm" style="border-radius: 20px;">sair</a>
            {% else %}
                <a href="{{ url_for('login') }}" class="btn btn-eko">entrar</a>
                <a href="{{ url_for('cadastro') }}" class="btn btn-outline-light">cadastrar</a>
            {% endif %}
          </div>
        </div>
      </div>
    </header>
    {% endblock navbar %}

    <main>
        {% block content %}
        {% endblock %}
    </main>

    {% block footer %}
    <footer class="text-center text-white-50 p-3 bg-eko-dark border-eko-footer mt-auto">
        <p class="mb-1 text-white-50 small">© 2025 eko — projeto acadêmico INF1039 — PUC-Rio</p>
        <p class="mb-0 text-white-50 small">dados de música fornecidos por Spotify. Spotify® é uma marca registrada da Spotify AB.</p>
    </footer>
    {% endblock footer %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>